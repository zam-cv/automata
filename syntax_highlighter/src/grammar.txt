WHITESPACE* = WHITESPACE ~ WHITESPACE* | EMPTY
WHITESPACE+ = WHITESPACE ~ WHITESPACE*

program = instruction*
instruction = statement | assignment | conditional | while | function | function_call
instruction* = instruction ~ WHITESPACE* ~ instruction* | EMPTY

function_keyword = "function"
if_keyword = "if"
else_keyword = "else"
while_keyword = "while"
var_keyword = "var"
return_keyword = "return"

number = ASCII_DIGIT ~ number*
number* = ASCII_DIGIT ~ number* | EMPTY
float = number ~ "." ~ number
string = "\"" ~ ANY ~ "\""
alphanumeric* = ASCII_ALPHANUMERIC ~ alphanumeric* | EMPTY
algebraic_operators = "+" | "-" | "*" | "/"
logical_operators = "<" | ">" | "==" | "!="

{block} = "{" ~ WHITESPACE* ~ block ~ WHITESPACE* ~ "}"
block = block_instruction ~ WHITESPACE* ~ block | EMPTY
block_instruction = instruction | return_keyword ~ WHITESPACE+ ~ expression ~ ";"

ident = ASCII_ALPHA ~ alphanumeric*
value = number | float | string | function_call | ident

(expression) = "(" ~ expression_with_spaces ~ ")"
expression_with_spaces = WHITESPACE* ~ expression ~ WHITESPACE*
expression = value ~ WHITESPACE* ~ expression* | (expression) ~ WHITESPACE* ~ expression*
expression* = algebraic_operators ~ WHITESPACE* ~ expression | logical_operators ~ WHITESPACE* ~ expression | EMPTY

statement = var_keyword ~ WHITESPACE+ ~ ident ~ WHITESPACE* ~ "=" ~ expression_with_spaces ~ ";"
assignment = ident ~ WHITESPACE* ~ "=" ~ expression_with_spaces ~ ";"

conditional = if_keyword ~ WHITESPACE* ~ (expression) ~ {block} ~ WHITESPACE* ~ else
else = else_keyword ~ WHITESPACE* ~ {block} | EMPTY
while = while_keyword ~ WHITESPACE* ~ (expression) ~ WHITESPACE* ~ {block}

(parameters) = "(" ~ parameters_with_spaces ~ ")"
parameters_with_spaces = WHITESPACE* ~ parameters ~ WHITESPACE*
parameters = ident ~ parameters* | EMPTY
parameters* = WHITESPACE* ~ "," ~ WHITESPACE* ~ ident ~ parameters* | EMPTY

function = function_keyword ~ WHITESPACE+ ~ ident ~ (parameters) ~ WHITESPACE* ~ {block}
function_call = ident ~ (parameters) ~ ";"