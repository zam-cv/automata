WHITESPACE* = WHITESPACE ~ WHITESPACE* | EMPTY
WHITESPACE+ = WHITESPACE ~ WHITESPACE*

program = instruction*
instruction = statement | conditional | while | function | assignment | function_call ~ ";"
instruction* = instruction ~ WHITESPACE* ~ instruction* | EMPTY

function_keyword = "function"
if_keyword = "if"
else_keyword = "else"
while_keyword = "while"
var_keyword = "var"
return_keyword = "return"

ident = ASCII_ALPHA ~ alphanumeric*
number = ASCII_DIGIT ~ number*
number* = ASCII_DIGIT ~ number* | EMPTY
float = number ~ "." ~ number
alphanumeric* = ASCII_ALPHANUMERIC ~ alphanumeric* | EMPTY
algebraic_operators = "+" | "-" | "*" | "/"
logical_operators = "<" | ">" | "==" | "!="

block = block_instruction ~ WHITESPACE* ~ block | EMPTY
return_value = return_keyword ~ WHITESPACE+ ~ expression ~ ";"
block_instruction = statement | conditional | while | function | return_value | assignment | function_call ~ ";"

value = float | number | function_call | ident

(expression) = "(" ~ WHITESPACE* ~ expression ~ WHITESPACE* ~ ")"
expression = value ~ WHITESPACE* ~ expression* | (expression) ~ WHITESPACE* ~ expression*
expression* = algebraic_operators ~ WHITESPACE* ~ expression | logical_operators ~ WHITESPACE* ~ expression | EMPTY

statement = var_keyword ~ WHITESPACE+ ~ ident ~ WHITESPACE* ~ "=" ~ WHITESPACE* ~ expression ~ WHITESPACE* ~ ";"
assignment = ident ~ WHITESPACE* ~ "=" ~ WHITESPACE* ~ expression ~ WHITESPACE* ~ ";"

conditional = if_keyword ~ WHITESPACE* ~ (expression) ~ WHITESPACE* ~ "{" ~ WHITESPACE* ~ block ~ WHITESPACE* ~ "}" ~ WHITESPACE* ~ else
else = else_keyword ~ WHITESPACE* ~ "{" ~ WHITESPACE* ~ block ~ WHITESPACE* ~ "}" | EMPTY
while = while_keyword ~ WHITESPACE* ~ (expression) ~ WHITESPACE* ~ "{" ~ WHITESPACE* ~ block ~ WHITESPACE* ~ "}"

(parameters) = "(" ~ WHITESPACE* ~ parameters ~ WHITESPACE* ~ ")"
parameters = ident ~ WHITESPACE* ~ parameters* | EMPTY
parameters* = "," ~ WHITESPACE* ~ ident ~ parameters* | EMPTY

(arguments) = "(" ~ WHITESPACE* ~ arguments ~ WHITESPACE* ~ ")"
arguments = expression ~ WHITESPACE* ~ arguments* | EMPTY
arguments* = "," ~ WHITESPACE* ~ expression ~ arguments* | EMPTY

function = function_keyword ~ WHITESPACE+ ~ ident ~ (parameters) ~ WHITESPACE* ~ "{" ~ WHITESPACE* ~ block ~ WHITESPACE* ~ "}"
function_call = ident ~ (arguments)